# ============================================
# My Perfect Meals - Environment Variables
# ============================================
# Copy this file to `.env` and fill in your actual values
# Lines marked with "PLACEHOLDER" need your real API keys/values
# Lines marked with "OPTIONAL" can be left as-is for development
# Last updated: Nov 2, 2025
# ============================================

# ============================================
# CORE CONFIGURATION
# ============================================
NODE_ENV=development
PORT=5000

# ============================================
# DATABASE (Required)
# ============================================
# PLACEHOLDER: Use your actual database URL
DATABASE_URL=postgresql://user:password@host.region.provider.com/database?sslmode=require

# ============================================
# OPENAI API (Required for AI meal generation)
# ============================================
# PLACEHOLDER: Get from https://platform.openai.com/api-keys
OPENAI_API_KEY=OPENAI_KEY_PLACEHOLDER

# OPTIONAL: Set to true to disable AI image generation
DISABLE_IMAGE_GEN=false

# ============================================
# STRIPE PAYMENTS (Required for subscriptions)
# ============================================
# PLACEHOLDER: Get from https://dashboard.stripe.com/apikeys
STRIPE_SECRET_KEY=STRIPE_SECRET_PLACEHOLDER
STRIPE_WEBHOOK_SECRET=STRIPE_WEBHOOK_PLACEHOLDER

# PLACEHOLDER: Get from Stripe Dashboard â†’ Publishable key
VITE_STRIPE_PUBLIC_KEY=STRIPE_PUBLISHABLE_PLACEHOLDER

# Checkout redirect URLs (leave as-is for local development)
APP_SUCCESS_URL=http://localhost:5000/checkout/success
APP_CANCEL_URL=http://localhost:5000/pricing?cancel=1

# ============================================
# FEATURE FLAGS
# ============================================
# Hormone & Life Stages Feature (Beta - Doctor Review Required)
# Set to true to enable hormone preset features for testing/review
# Safe default: false (disabled until explicitly enabled)
VITE_FEATURE_HORMONE_LIFE_STAGES=true

# Hormone Preview Clinical Recipes (Doctor Review Only)
# Set to true to enable clinical preview weekly boards with 20 sample recipes
# Shows "Preview Weekly Board" links in hormone presets for physician evaluation
# Safe default: false (disabled for controlled rollout to clinicians)
VITE_FEATURE_HORMONE_PREVIEW=false

# Development shortcuts (set to true to unlock all features without subscriptions)
UNLOCK_ALL_FEATURES=false

# ============================================
# DEVTOOLS (Development Only)
# ============================================
# DevTools UI Controls (floating debug panel, onboarding reset buttons)
# Set to 1 to enable DevTools in development mode
# MUST be 0 (or unset) in production - DevTools are ALWAYS disabled in production builds
# Safe default: 0 (disabled for production safety)
# Only enable locally when you need debugging controls
VITE_SHOW_DEVTOOLS=0

# ============================================
# OPTIONAL: COMMUNICATION SERVICES
# ============================================
# SendGrid Email (for transactional emails)
# PLACEHOLDER: Get from https://app.sendgrid.com/settings/api_keys
SENDGRID_API_KEY=SENDGRID_KEY_PLACEHOLDER

# Twilio SMS (for text message notifications)
# PLACEHOLDER: Get from https://console.twilio.com/
TWILIO_ACCOUNT_SID=TWILIO_SID_PLACEHOLDER
TWILIO_AUTH_TOKEN=TWILIO_TOKEN_PLACEHOLDER
TWILIO_FROM_NUMBER=+1XXXXXXXXXX

# ElevenLabs Voice (for AI voice features)
# PLACEHOLDER: Get from https://elevenlabs.io/
ELEVENLABS_API_KEY=ELEVENLABS_KEY_PLACEHOLDER

# ============================================
# OPTIONAL: WEB PUSH NOTIFICATIONS
# ============================================
# PLACEHOLDER: Generate with `npx web-push generate-vapid-keys`
VAPID_PUBLIC_KEY=VAPID_PUBLIC_PLACEHOLDER
VAPID_PRIVATE_KEY=VAPID_PRIVATE_PLACEHOLDER

# ============================================
# OPTIONAL: ADVANCED SETTINGS
# ============================================
# Session secret (for authentication)
SESSION_SECRET=LONG_RANDOM_SESSION_SECRET_PLACEHOLDER

# Timezone
DEFAULT_TZ=America/New_York

# Admin key for protected endpoints
ADMIN_KEY=ADMIN_KEY_PLACEHOLDER

# ============================================
# DEPLOYMENT ONLY (Railway/Production)
# ============================================
# Only needed when deploying to Railway or production
# CORS_ORIGIN=https://your-app.railway.app,https://your-custom-domain.com
# APP_ORIGIN=https://your-app.railway.app
# RAILWAY_ENVIRONMENT=production

# ============================================
# INTERNAL SETTINGS (Don't modify unless you know what you're doing)
# ============================================
# API URLs
API_BASE_URL=http://localhost:5000
APP_BASE_URL=http://localhost:5000
VITE_API_BASE_URL=http://localhost:5000

# Meal generation engine
MEALGEN_V2=true
MEALGEN_MAX_TRIES=3
MEALGEN_TIMEOUT_MS=60000

# Rate limiting
MEAL_ENGINE_RATE_LIMIT=60
COST_MAX_CALLS_PER_USER=50
